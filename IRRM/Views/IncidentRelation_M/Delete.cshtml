@model IRRM.Models.IncidentRelation_M

@{
    Layout = null;
}

 
    <h3>Are you sure you want to delete this?</h3>
    <div>

    <dl class="dl-horizontal">
        <dt>
             Incident Relation 
        </dt>

        <dd>
            @Html.DisplayFor(model => model.IncidentRelation)
        </dd>

       

      

        <dt>
    Send Email 
        </dt>

        <dd>
            @Html.DisplayFor(model => model.SendEmail)
        </dd>

        <dt>
       Email Subject 
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EmailSubject)
        </dd>

        <dt>
         Email Header 
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EmailHeader)
        </dd>

        <dt>
 Email Footer 
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EmailFooter)
        </dd>
        <dt>
    @Html.DisplayNameFor(model => model.Comments)
</dt>

<dd>
    @Html.DisplayFor(model => model.Comments)
</dd>
        <dt>
            @Html.DisplayNameFor(model => model.Active)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Active)
        </dd>
    </dl>

    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "delform-" + Html.DisplayFor(model => model.IncidentRelationID) }))
    {
        @Html.AntiForgeryToken()

        <div class="form-actions no-color">
            <input type="submit" value="Delete" class="btn btn-danger col-md-offset-1" />
        </div>
    }


</div>

<script>
    $(document).ready(function () {
        $("#delform-"+@Html.DisplayFor(model => model.IncidentRelationID)).submit(function (e) {
            e.preventDefault();
            var formdata = new FormData(this);

          //  alert($("#DFormID").val());
            $.ajax({
                method: "POST",
                url: "@Url.Content("~/IncidentRelation_M/Delete/" + Html.DisplayFor(model => model.IncidentRelationID))",
                data: formdata,
                mimeTypes: "multipart/form-data",
                contentType: false,
                cache: false,
                processData: false,
                success: function (data) {
                   // alert('Successfully deleted!');
                    window.location.href = "@Url.Content("~/IncidentRelation_M")";
                },
                error: function () {
                    alert('Unable to delete, try editing instead! ');
                }
            });
        });
    });
</script>