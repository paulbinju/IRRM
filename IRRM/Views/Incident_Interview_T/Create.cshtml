@model IRRM.Models.Incident_Interview_T

@{
    Layout = null;
}
 
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "mainforminter" }))
{
       

    <div class="form-horizontal">
 
      
 

 

        <div class="form-group">
            <div class="control-label col-md-2"><b>Interviewee <span class="red">*</span> </b></div>
            <div class="col-md-10">
             

                <select class="form-control" name="IntervieweeID">
                    <option value="">Select</option>
                    @foreach (var intv in ViewBag.IntervieweeID)
                    {
                        <option value="@intv.IncidentPeopleID">@intv.Name</option>

                    }
                </select>
            </div>
        </div>

        <div class="form-group">
            <div class="control-label col-md-2"><b>Interview Date <span class="red">*</span> </b></div>
            <div class="col-md-10">
                <input type="datetime-local" name="InterviewDate" class = "form-control" required />
                @Html.ValidationMessageFor(model => model.InterviewDate, "", new { @class = "text-danger" })
            </div>
        </div>

 
        <div class="form-group">
            <div class="control-label col-md-2"><b>Details <span class="red">*</span> </b></div>
            <div class="col-md-10">
                @Html.TextAreaFor(model => model.Details, new { required = "required", htmlAttributes = new { @class = "form-control input-lg" } })
                @Html.ValidationMessageFor(model => model.Details, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.HiddenFor(model => model.IncidentID, new { htmlAttributes = new { @class = "form-control", @Value = ViewBag.IncidentID } })
            @Html.DisplayFor(model => model.IncidentID)
            <div class="col-md-offset-2 col-md-9">
                <input type="submit" value="Create" class="btn btn-danger" />
            </div>
        </div>
    </div>
}

<script>
    jQuery(document).ready(function () {
        jQuery("#mainforminter").submit(function (e) {

            e.preventDefault();
            var formdata = new FormData(this);
            jQuery.ajax({
                method: "POST",
                url: "@Url.Content("~/Incident_Interview_T/Create")",
                data: formdata,
                contentType: false,
                cache: false,
                processData: false,
                success: function (data) {
                    window.location.href = "@Url.Content("~/Incidents/Details/"+ViewBag.IncidentID)";
                  //  alert('Successfully added!');
                    jQuery('#AddInterview').modal('toggle');
                    loadinterview();
                },
                error: function () {
                    alert("Couldn't Save, check the input values!");
                }
            });
        });
    });
</script>